"use strict";(self.webpackChunkbackend=self.webpackChunkbackend||[]).push([[9514],{87532:(fe,E,e)=>{e.r(E),e.d(E,{default:()=>le});var s=e(67294),D=e(97132),z=e(18446),B=e.n(z),W=e(45697),d=e.n(W),$=e(17034),j=e(67838),G=e(49066),u=e(68547),C=e(85018),F=e(29728),H=e(67109),V=e(185),x=e(11276),S=e(74571),U=e(35961),O=e(91216),P=e(82562),l=e(15537),M=e(49826);const Z=({sort:n="",pageSize:a=10,onChange:t})=>{const{formatMessage:o}=(0,D.useIntl)();return s.createElement(U.x,{background:"neutral0",hasRadius:!0,shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},s.createElement(x.r,{gap:4},s.createElement(S.P,{s:12,col:6},s.createElement(O.P,{label:o({id:(0,l.Z)("config.entries.title"),defaultMessage:"Entries per page"}),hint:o({id:(0,l.Z)("config.entries.note"),defaultMessage:"Number of assets displayed by default in the Media Library"}),onChange:i=>t({target:{name:"pageSize",value:i}}),name:"pageSize",value:a,"test-pageSize":a,"data-testid":"pageSize-select"},M.ay.map(i=>s.createElement(P.W,{"data-testid":`pageSize-option-${i}`,key:i,value:i},i)))),s.createElement(S.P,{s:12,col:6},s.createElement(O.P,{label:o({id:(0,l.Z)("config.sort.title"),defaultMessage:"Default sort order"}),hint:o({id:(0,l.Z)("config.note"),defaultMessage:"Note: You can override this value in the media library."}),onChange:i=>t({target:{name:"sort",value:i}}),name:"sort",value:n,"test-sort":n,"data-testid":"sort-select"},M.Fo.map(i=>s.createElement(P.W,{"data-testid":`sort-option-${i.value}`,key:i.key,value:i.value},o({id:(0,l.Z)(i.key),defaultMessage:`${i.value}`})))))))};Z.propTypes={sort:d().string.isRequired,pageSize:d().number.isRequired,onChange:d().func.isRequired};var Y=e(60612),J=e(36968),K=e.n(J),Q=e(27361),X=e.n(Q),p=e(55994);const L=`${p.Z}/ON_CHANGE`,T=`${p.Z}/SET_LOADED`;var w=Object.defineProperty,k=Object.defineProperties,q=Object.getOwnPropertyDescriptors,A=Object.getOwnPropertySymbols,_=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable,b=(n,a,t)=>a in n?w(n,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[a]=t,te=(n,a)=>{for(var t in a||(a={}))_.call(a,t)&&b(n,t,a[t]);if(A)for(var t of A(a))ee.call(a,t)&&b(n,t,a[t]);return n},ae=(n,a)=>k(n,q(a));const y={initialData:{},modifiedData:{}},N=n=>ae(te({},y),{initialData:n,modifiedData:n}),ne=(n=y,a)=>(0,Y.default)(n,t=>{switch(a.type){case L:{K()(t,["modifiedData",...a.keys.split(".")],a.value);break}case T:{const o=N(X()(t,["modifiedData"],{}));t.initialData=o.initialData,t.modifiedData=o.modifiedData;break}default:return t}}),se=({name:n,value:a})=>({type:L,keys:n,value:a}),ie=()=>({type:T});var oe=e(60862),re=(n,a,t)=>new Promise((o,i)=>{var f=r=>{try{g(t.next(r))}catch(c){i(c)}},h=r=>{try{g(t.throw(r))}catch(c){i(c)}},g=r=>r.done?o(r.value):Promise.resolve(r.value).then(f,h);g((t=t.apply(n,a)).next())});const I=({config:n})=>{const{trackUsage:a}=(0,u.useTracking)(),{formatMessage:t}=(0,D.useIntl)(),o=(0,u.useNotification)(),{mutateConfig:i}=(0,oe.Z)(),{isLoading:f}=i,[h,g]=(0,s.useState)(!1),r=()=>g(m=>!m),[c,R]=(0,s.useReducer)(ne,y,()=>N(n)),{initialData:de,modifiedData:v}=c,ue=m=>{m.preventDefault(),r()},ge=()=>re(void 0,null,function*(){a("willEditMediaLibraryConfig"),yield i.mutateAsync(v),r(),R(ie()),o({type:"success",message:{id:"notification.form.success.fields",defaultMessage:"Changes saved"}})}),ce=({target:{name:m,value:me}})=>{R(se({name:m,value:me}))};return(0,u.useFocusWhenNavigate)(),s.createElement($.A,null,s.createElement(V.o,{"aria-busy":f},s.createElement("form",{onSubmit:ue},s.createElement(j.T,{navigationAction:s.createElement(u.Link,{startIcon:s.createElement(H.Z,null),to:`/plugins/${p.Z}`,id:"go-back"},t({id:(0,l.Z)("config.back"),defaultMessage:"Back"})),primaryAction:s.createElement(F.z,{size:"S",startIcon:s.createElement(C.Z,null),disabled:B()(v,de),type:"submit"},t({id:"global.save",defaultMessage:"Save"})),subtitle:t({id:(0,l.Z)("config.subtitle"),defaultMessage:"Define the view settings of the media library."}),title:t({id:(0,l.Z)("config.title"),defaultMessage:"Configure the view - Media Library"})}),s.createElement(G.D,null,s.createElement(Z,{"data-testid":"settings",pageSize:v.pageSize||"",sort:v.sort||"",onChange:ce})),s.createElement(u.ConfirmDialog,{bodyText:{id:(0,l.Z)("config.popUpWarning.warning.updateAllSettings"),defaultMessage:"This will modify all your settings"},iconRightButton:s.createElement(C.Z,null),isConfirmButtonLoading:f,isOpen:h,onToggleDialog:r,onConfirm:ge,variantRightButton:"success-light"}))))};I.propTypes={config:d().shape({pageSize:d().number,sort:d().string}).isRequired};const le=I}}]);
